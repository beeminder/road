<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script src = "https://d3js.org/d3.v5.js"></script>
    <script src = "../src/moment.js"></script>
    <script src = "../src/pikaday.js"></script>
    <script src = "../src/polyfit.js"></script>
    <script src = "../src/butil.js"></script>
    <script src = "../src/broad.js"></script>
    <script src = "../src/beebrain.js"></script>
    <script src = "../src/btest.js"></script>
</head>
<body>

<div id="results"></div>
  
<script>

  function transformToAssocArray( prmstr ) {
    var params = {};
    var prmarr = prmstr.split("&");
    for ( var i = 0; i < prmarr.length; i++) {
        var tmparr = prmarr[i].split("=");
        params[tmparr[0]] = tmparr[1];
    }
    return params;
  }

  function getParams() {
    var prmstr = window.location.search.substr(1);
    return prmstr != null && prmstr != "" ? transformToAssocArray(prmstr) : {};
  }

  var files = [
    "afcuttin+gmailzero",
    "aimeeg+weight",
    "a+job",
    "aj+travel",
    "alicegong+moneytimesleep",
    "ardeibel+math",
    "ardeibel+reading",
    "avogadro+programiranje",
    "b+coffee",
    "b+fdl",
    "bluetulip+work-oops-tagtime",
    "b+meta",
    "b+weight",
    "byorgey+bites",
    "caillu+duolingo-spanish",
    "cambienta+limit_outbursts",
    "chris_s+audible_listening",
    "dan+ankicards",
    "denizsurmeli+coding",
    "divide+housework",
    "dmiheler+rbook",
    "drtall+gmailzero",
    "elwyn+waist",
    "ffukuchi+meditation",
    "fightdiet+team1",
    "fryhole+dropit2019",
    "integery",
    "jabee+weight",
    "jalexwood+notlookquitesospherical",
    "johnmarkos+booze",  // Very small numeric differences result in lane difference
    "johnmarkos+weight2",
    "jonathandupont+units",
    "justyn+gmailzero",
    "kdmprincess+net_calories",
    "ku+weight",
    "kyshoc+nutrition",
    "lharringtonmissin+weight",
    "mbork+journal",
    "mbork+ledger",
    "muskwalker+weight", // rate=0 and date=null in final row
    "nacks+nacks",
    "neinei+stay_dance_eye_contact",
    "nightmare",  // road is empty, tfin=null
    "njberry+riseup",
    "oxfe+bookofmormon",
    "pmyteh+procrastination",
    "rfnash+bookmarks",
    "riderback65+core_and_pt",
    "rjhanes19+deficit",
    "romduda+moodscope1",
    "samuelb+sleep",
    "seanaas+germanpractice",
    "shanaqui+fitbitsteps",  // first road entry earlier than (tini,vini)
    "smurfeater+anki",
    "sohum+weight",
    "ssog+bench",
    "tristanpendergrass+piano-reps",
    "uwchem94+calorie_deficit",
    "vijaytalluru+nocomics",
    "vinciamorim+bodygym",
    "volya+french",
    "whackedspinach+inbox-zero",
    "xenocid+gmailzero",  // This has rate=0 and date=null as the final row
    "xmin",
    "yatsynych+guitar",
    "yebyenw+20-minutes",
    "zachzaslow+sleep",
    "zarbockc+eating"
  ];
  
  const rDiv = document.getElementById('results');
  const params = getParams()
  if (!params.hasOwnProperty("bbpath")) {
    rDiv.innerHTML
      = "Please provide an absolute path for BB files with the 'bbpath' parameter."
  } else {
    var opts = {div: rDiv, goals:files, bbpath: (params["bbpath"]) }
    btest.batchCompare( opts )
  }
</script>

</body>
</html>
