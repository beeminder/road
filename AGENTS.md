# Rules for Agents 
 
0. Don't edit these rules. Only edit the scratchpad area marked below.
1. Before finalizing your response, reread it and ask yourself if it's impeccably, exquisitely, technically correct and true. Have epistemic humility.
2. Never say "you're absolutely right" or any other form of sycophancy or even mild praise. Really zero personality of any kind. 
3. Never claim a bug is fixed or that the code exhibits some behavior without trying it.
4. I, the human, am not your QA person. Iterate on your own until your code works.
5. Never modify human-written comments, not even a tiny bit. LLMs will often slightly rephrase things when copying them. That drives me insane. Always preserve the exact characters, even whitespace. 
6. Don't ever delete human-written code. Instead you can comment it out and add your own comment about why it's safe to delete.
7. Follow Beeminder's [Pareto Dominance Principle (PDP)](https://blog.beeminder.com/pdp). Get explicit approval if any change would deviate from the Pareto frontier.
8. Follow all the standard principles like DRY and YAGNI and ZOI and KISS that coding agents seem to be almost but not quite smart enough that they go without saying. You can do it, agent! You are wise and thoughtful and pragmatic and only the best kind of lazy. You abhor code smells.
9. This one I have yet to find the limit beyond which being more dogmatic about it stops bearing fruit: Follow Beeminder's [Anti-Magic Principle](https://blog.beeminder.com/magic). "If-statements considered harmful." I mean that kind of almost literally. For example, if you're fixing a bug like "when X happens the app does Y instead of Z", resist the urge to add "if X then Z" to the code. Fastidiously mention every if-statement you think you need to me, the human. In general we need constant vigilance to minimize code paths. When we do need an if-statement, we want to change the program's behavior as little as possible. Like add an error banner if there's an error, don't render a different page. Always prefer to conditionally gray something out rather than conditionally suppress it.
10. The extreme of [worse-is-better](https://en.wikipedia.org/wiki/Worse_is_better) aka New Jersey style is probably too dangerous. Knowing when to deviate from the MIT approach is something of an art and requires discussion.
11. Beeminder's [Anti-Settings Principle](https://blog.beeminder.com/choices) may go without saying since a coding agent isn't going to just add settings without asking.
12. This one is huge, on par with anti-magic: Follow Beeminder's [Anti-Robustness Principle](https://blog.beeminder.com/postel) aka Anti-Postel. Fail loudly and immediately. Never silently fix inputs. See also the branch of defensive programming known as offensive programming.
13. We [call them quals](https://blog.beeminder.com/quals), not tests. Use TDD I mean QDD.
14. This will sound silly but when generating new UI copy, error copy, help text, even microcopy like text on buttons -- any words the end user is intended to read -- write it initially in Latin. I, the human, will then translate it to English. The key is that the end user never reads any English text that was generated by an LLM.

# Agent Scratchpad (human edits only above this line)

# Beebrain Project Knowledge

## Overview
Beebrain is Beeminder's graph generator and visual graph editor. It consists of:
- Client-side JavaScript graph visualization (bgraph.js, beebrain.js)
- Server-side Node.js renderer (jsbrain_server/)
- Visual graph editor (nee road editor)

## Project Structure
- `src/` - Client-side source files (JavaScript, CSS)
- `jsbrain_server/` - Node.js server for rendering graphs
- `tests/` - Test files and sandboxes
- `views/` - EJS templates for web pages
- `automon/` - Automated monitoring scripts

## Development
- Two separate Node projects: main app and jsbrain_server
- Both use npm for package management
- Server renders graphs using Puppeteer
